import { describe, it } from 'vitest';
import { render, screen } from '@testing-library/react';
import Page from '../species/page';
import { verifyTableData } from './helpers/verify-table-data';

describe('species list page', () => {
	it('should show a table of species data', async () => {
		render(await Page());
		const speciesTable = await screen.findByRole('table');
		verifyTableData(
			speciesTable,
			[
				[
					'Species',
					'Birds',
					'Encounters',
					'Sessions',
					'Max per session',
					'% Birds retrapped',
					'Max time span',
					'Max proven age',
					'Max encountered bird',
					'Max weight',
					'Avg weight',
					'Min weight',
					'Median weight',
					'Max wing',
					'Avg wing',
					'Min wing',
					'Median wing'
				],
				[
					'Blackbird',
					1,
					1,
					1,
					1,
					0,
					0,
					1,
					1,
					87.3,
					87.3,
					87.3,
					87.3,
					132,
					132,
					132,
					132
				],
				[
					'Blackcap',
					2,
					2,
					2,
					1,
					0,
					0,
					0,
					1,
					19.6,
					19.3,
					18.9,
					19.3,
					74,
					74,
					74,
					74
				],
				[
					'Blue Tit',
					9,
					10,
					6,
					3,
					11,
					38,
					1,
					2,
					11.1,
					10.3,
					9.9,
					10.3,
					64,
					61.9,
					60,
					62
				],
				[
					"Cetti's Warbler",
					6,
					15,
					6,
					4,
					83,
					66,
					1,
					3,
					15.1,
					13,
					11.1,
					13.9,
					65,
					59.9,
					55,
					62
				],
				[
					'Chiffchaff',
					65,
					68,
					6,
					25,
					5,
					25,
					1,
					2,
					10.6,
					7.7,
					6.1,
					7.5,
					66,
					61.3,
					56,
					62
				],
				[
					'Chiffchaff (Siberian - tristis)',
					3,
					3,
					2,
					2,
					0,
					0,
					1,
					1,
					9.1,
					8.4,
					7.8,
					8.2,
					64,
					62,
					61,
					61
				],
				[
					'Dunnock',
					2,
					3,
					2,
					2,
					50,
					39,
					0,
					2,
					20.7,
					20.2,
					19.7,
					20.3,
					73,
					72,
					71,
					72
				],
				[
					'Goldcrest',
					10,
					10,
					5,
					6,
					0,
					0,
					1,
					1,
					6,
					5.5,
					5.1,
					5.4,
					56,
					54.8,
					53,
					55
				],
				[
					'Great Spotted Woodpecker',
					1,
					1,
					1,
					1,
					0,
					0,
					0,
					1,
					76.7,
					76.7,
					76.7,
					76.7,
					129,
					129,
					129,
					129
				],
				[
					'Great Tit',
					6,
					6,
					4,
					2,
					0,
					0,
					1,
					1,
					20.5,
					18.4,
					17.1,
					18.3,
					77,
					74.8,
					71,
					76
				]
			],
			{ isPartial: true }
		);
	});
});
